Install Emacs as a systemd service

== Environment Setup ==
Put the folowing somewhere in your PATH, I chose ~/.local/bin:

$ cat <<EOS > ~/.local/bin/emacs-newwindow
#!/usr/bin/env bash
# -n: no wait
# -c: create a new window
# -a: alternate editor. "" says start emacs daemonized
emacsclient -n -c -a "" $*
EOS

$ chmod 755 ~/.local/bin/emacs-newwindow

Add the following to .bashrc/.bash_profile/.profile:

alias ec='emacs-newwindow'
export EDITOR=emacs-newwindow
export VISUAL=emacs-newwindow

== Daemon Setup ==

See the man/info pages and emacs wiki for more info: 

- man emacsclient
- info emacs
- http://www.emacswiki.org/emacs/EmacsAsDaemon#

=== Setup Daemon with systemd ===

==== Systemd Service Init ====

as root:

$ cat <<EOS > `pkg-config systemd --variable=systemdsystemunitdir`/emacs.service
[Unit]
Description=Emacs: the extensible, self-documenting text editor

[Service]
Type=forking
ExecStart=/usr/bin/emacs --daemon
ExecStop=/usr/bin/emacsclient --eval "(progn (setq kill-emacs-hook 'nil) (kill-emacs))"
ExecReload=/usr/bin/emacsclient --eval "(progn (load-file \"init.el\"))"
Restart=always
User=erick

[Install]
WantedBy=multi-user.target
EOS

Install and start service

$ systemctl enable emacs.service
$ systemctl start emacs.service

Check status

$ systemctl is-enabled emacs.service
$ systemctl is-active emacs.service